<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BPS 5-15 Intermediate Category Mock Test Preparation</title>
    <!-- Load Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Poppins Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Load Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        /* --- CSS Custom Properties and Dark Mode Setup (Matching Professional Palette) --- */
        :root {
            /* Professional Color Palette (Inspired by original JST file for better aesthetics) */
            --primary-blue: #1e40af;    /* Primary Blue (Mock Test Hover Border) */
            --secondary-blue: #3b82f6;  /* Secondary Blue */
            --accent-color: #f59e0b;    /* Amber/Orange (Notice Accent) */
            --success-color: #10b981;   /* Emerald Green (Mock Test Button) */
            
            /* New Past Paper Color: VIOLET */
            --past-paper-bg: #8b5cf6;   /* Violet 500 */
            --past-paper-dark: #6d28d9; /* Violet 700 */

            /* Gradients */
            --header-gradient: linear-gradient(135deg, var(--primary-blue) 0%, var(--secondary-blue) 100%);
            --card-border-gradient: linear-gradient(90deg, var(--success-color), var(--primary-blue));
            --past-paper-gradient: linear-gradient(45deg, var(--past-paper-bg), var(--past-paper-dark));

            /* Backgrounds and Text */
            --bg-primary-light: #f8fafc;
            --card-bg-light: #ffffff;
            --text-color-light: #1e293b;
            --text-muted-light: #64748b;
            --shadow-pro: 0 10px 25px rgba(0, 0, 0, 0.12);
            --transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);

            /* New: Light Mode Text Fix */
            --text-high-contrast: rgba(0, 0, 0, 0.85);

            /* New Danger Color for Badge */
            --danger-color: #F56565; /* Red */
        }

        [data-theme="dark"] {
            --primary-blue: #60a5fa; 
            --secondary-blue: #3b82f6;
            --accent-color: #fcd34d;
            --success-color: #34d399;
            --past-paper-bg: #a78bfa;
            --past-paper-dark: #8b5cf6;
            
            --bg-primary-light: #0f172a;
            --card-bg-light: #1e293b;
            --text-color-light: #f1f5f9;
            --text-muted-light: #cbd5e1;
            --shadow-pro: 0 10px 25px rgba(0, 0, 0, 0.4);

            /* New: Dark Mode Text Fix uses default light variable */
            --text-high-contrast: var(--text-color-light); 

            /* New Danger Color for Badge (Dark) */
            --danger-color: #FC8181; /* Lighter Red */
        }

        /* --- Base Styles --- */
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-primary-light);
            color: var(--text-color-light);
            transition: background-color var(--transition), color var(--transition);
            /* Adding a subtle background pattern for professionalism */
            background-image: radial-gradient(var(--text-muted-light) 0.5px, transparent 0.5px);
            background-size: 15px 15px;
            background-attachment: fixed;
        }
        .header-bg {
            background: var(--header-gradient);
            position: relative;
            overflow: hidden;
            height: 220px; /* Adjusted height for better look */
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* --- Header Wave Pattern --- */
        .header-bg::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100px; /* Height of the wave */
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320'%3E%3Cpath fill='%23ffffff' fill-opacity='0.1' d='M0,160L48,176C96,192,192,224,288,218.7C384,213,480,171,576,149.3C672,128,768,128,864,149.3C960,171,1056,213,1152,218.7C1248,224,1344,192,1392,176L1440,160L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3E%3C/path%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: bottom;
            background-size: cover;
            opacity: 0.5; /* Subtle */
            pointer-events: none;
        }
        
        .text-primary {
            color: var(--primary-blue);
        }

        /* --- NEW: Gradient Animation --- */
        @keyframes gradient-pan {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .bg-secondary-btn {
            background: linear-gradient(45deg, var(--success-color) 0%, #34d399 100%);
            transition: all var(--transition);
            box-shadow: 0 4px 10px rgba(16, 185, 129, 0.3);
            background-size: 200% auto; /* For animation */
            animation: gradient-pan 5s linear infinite; /* Animated gradient */
        }
        .bg-secondary-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(16, 185, 129, 0.5);
        }

        /* --- Past Paper Button Style (New Violet Gradient) --- */
        .bg-past-paper-btn {
            background: var(--past-paper-gradient);
            transition: all var(--transition);
            box-shadow: 0 4px 10px rgba(139, 92, 246, 0.3);
            background-size: 200% auto; /* For animation */
            animation: gradient-pan 5s linear infinite; /* Animated gradient */
        }
        .bg-past-paper-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(139, 92, 246, 0.5);
        }

        /* --- Header Text Animation (Added from JST design) --- */
        .typing-text {
            font-size: 1.1rem;
            font-weight: 600;
            border-right: 2px solid var(--card-bg-light);
            animation: blink 1s infinite;
            min-height: 1.6rem;
            display: inline-block;
            text-shadow: 0 1px 5px rgba(0, 0, 0, 0.1);
            color: white;
        }
        @keyframes blink {
            0%, 50% { border-right-color: white; }
            51%, 100% { border-right-color: transparent; }
        }


        /* --- Custom Components (Notice Box) --- */
        .notice-box {
            /* Glassmorphism Effect */
            background-color: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            /* --- */
            border-left: 5px solid var(--accent-color); /* Amber Accent */
            box-shadow: var(--shadow-pro);
            transition: all var(--transition);
            color: var(--text-color-light);
        }
        [data-theme="dark"] .notice-box {
             /* Dark Glassmorphism */
             background-color: rgba(30, 41, 59, 0.6);
             border: 1px solid rgba(255, 255, 255, 0.1);
             /* --- */
             border-left-color: var(--accent-color);
        }
        /* FIX: High contrast text for notice box content in Light Mode */
        [data-theme="light"] .notice-box .notice-content-text {
            color: var(--text-high-contrast) !important;
        }

        /* --- Custom Components (Cards) --- */
        .card-pro {
            /* Glassmorphism Effect */
            background-color: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            /* --- */
            border-radius: 16px;
            padding: 24px;
            text-align: center;
            transition: all var(--transition);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            position: relative;
            overflow: hidden;
            /* Initial transform for fade-in */
            opacity: 0;
            transform: translateY(20px);
        }
        .card-pro:hover {
            transform: translateY(-5px) scale(1.03); /* Updated hover effect */
            box-shadow: var(--shadow-pro);
        }
        .card-pro::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--card-border-gradient);
            transition: transform var(--transition);
            transform: scaleX(0);
            transform-origin: left;
            z-index: 10;
            /* Animated Gradient */
            background-size: 200% auto;
            animation: gradient-pan 5s linear infinite;
        }
        .card-pro:hover::before {
            transform: scaleX(1);
        }
        /* Past Paper Card Hover Border */
        .past-paper-card.card-pro::before {
            background: var(--past-paper-gradient);
            background-size: 200% auto; /* For animation */
            animation: gradient-pan 5s linear infinite; /* Animated gradient */
        }
        
        [data-theme="dark"] .card-pro {
             /* Dark Glassmorphism */
             background-color: rgba(30, 41, 59, 0.6);
             border: 1px solid rgba(255, 255, 255, 0.1);
        }


        /* --- NEW: Disabled Card Style --- */
        .disabled-card {
            opacity: 0.6; /* Dim the card */
            pointer-events: none; /* Disable mouse interaction */
            cursor: default;
        }
        .disabled-card:hover {
            transform: translateY(0) !important; /* Remove hover effect */
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08) !important;
        }
        .disabled-card::before {
            display: none; /* Remove border hover effect */
        }
        .disabled-card .disabled-btn {
             background: #6b7280 !important; /* Gray background for disabled button */
             box-shadow: none !important;
             animation: none !important; /* Stop gradient animation on disabled */
        }


        /* Card Icon Coloring */
        .card-icon-primary, .card-icon-secondary {
            font-size: 3rem;
            transition: transform var(--transition); /* Added transition for hover effect */
        }
        .card-pro:hover .card-icon-primary,
        .card-pro:hover .card-icon-secondary {
            transform: scale(1.1); /* Icon scales on card hover */
        }

        .card-icon-primary {
            background: linear-gradient(45deg, var(--primary-blue), var(--secondary-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .card-icon-secondary {
            /* Use new violet color for better look */
            background: var(--past-paper-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* --- NEW: Badge Style --- */
        .badge-new {
            position: absolute;
            top: 16px;
            right: 16px;
            background-color: var(--danger-color); /* Use existing danger color */
            color: white;
            font-size: 0.75rem; /* 12px */
            font-weight: 700;
            padding: 4px 10px;
            border-radius: 9999px; /* pill shape */
            text-transform: uppercase;
            animation: pulse-badge 1.5s infinite;
            z-index: 11;
        }

        @keyframes pulse-badge {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(245, 101, 101, 0.7);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 0 0 8px rgba(245, 101, 101, 0);
            }
        }

        /* --- FIX: Card Title Text Color for Light Mode (Ensuring high contrast) --- */
        .card-title-text {
            color: var(--text-color-light);
            transition: color var(--transition);
        }
        [data-theme="light"] .card-title-text {
            color: #1e293b; 
        }
        [data-theme="dark"] .card-title-text {
            color: var(--text-color-light);
        }
        
        /* Section Title Styling */
        .section-title {
            position: relative;
            padding-bottom: 12px;
            font-weight: 800;
        }
        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: var(--card-border-gradient);
            border-radius: 2px;
            /* Animated Gradient */
            background-size: 200% auto;
            animation: gradient-pan 5s linear infinite;
        }
        /* Past Paper Section Title Underline (Violet) */
        .past-paper-title::after {
            background: var(--past-paper-gradient);
            background-size: 200% auto; /* For animation */
            animation: gradient-pan 5s linear infinite; /* Animated gradient */
        }

        /* Dark Mode Toggle Position - MODIFIED */
        .theme-toggle {
            position: absolute; /* Changed from fixed */
            top: 20px;
            right: 20px;
            /* z-index: 1000; */ /* No longer needed on top of everything */
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 50px;
            padding: 8px 16px;
            cursor: pointer;
            transition: all var(--transition);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            font-weight: 600;
            color: var(--text-color-light); /* Will be dark in light mode */
        }
        [data-theme="dark"] .theme-toggle {
            background: rgba(45, 55, 72, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-color-light); /* Will be light in dark mode */
        }
        /* Need to adjust text color for light mode specifically */
        [data-theme="light"] .theme-toggle {
            color: var(--text-color-light);
        }

        .theme-toggle:hover {
            transform: scale(1.05);
        }

        /* --- Footer Styles --- */
        /* Footer background updated to header gradient */
        .footer-bg {
            background: var(--header-gradient);
        }
        .footer-social-link {
            transition: transform var(--transition);
        }
        .footer-social-link:hover {
            transform: translateY(-5px) scale(1.1);
        }
        
        .fab.fa-whatsapp {
            color: #25D366; /* WhatsApp Green */
        }
        .fab.fa-facebook {
            color: #1877F2; /* Facebook Blue */
        }
        
        /* --- Animations --- */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in.active {
            animation: fadeIn 0.8s ease-out forwards;
        }
        /* Delay classes are applied via JS to ensure they only start when visible */
    </style>
</head>
<body data-theme="light"> 

    <!-- Theme Toggle -->
    <!-- Note: The Theme Toggle is now inside the header -->
    
    <!-- Header (Sticky/Fixed) -->
    <!-- MODIFIED: Removed mb-12 -->
    <header class="header-bg text-white shadow-xl">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 text-center relative z-10">
            
            <!-- Theme Toggle Button (MOVED HERE) -->
            <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
                <i class="fas fa-moon" id="themeIcon"></i>
            </button>

            <h1 class="text-4xl font-extrabold tracking-tight sm:text-5xl pb-2 animate-fade-in delay-0">
               BPS 5-15 Intermediate Category Mock Test Preparation
            </h1>
            <div class="text-white text-lg mt-3 animate-fade-in delay-1">
                <span class="typing-text" id="typingText"></span>
            </div>
        </div>
    </header>

    <!-- Main Content Area -->
    <!-- MODIFIED: Changed py-10 to py-16 for better spacing -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 min-h-screen">
        
        <!-- IMPORTANT NOTICE -->
        <div class="notice-box p-6 sm:p-8 rounded-xl mb-12 animate-fade-in" data-delay="200">
            <div class="flex items-start sm:items-center">
                <i class="fas fa-lock text-3xl mr-4 text-red-500 flex-shrink-0"></i>
                <div class="flex-grow">
                    <p class="font-bold text-lg" style="color: var(--primary-blue);">IMPORTANT NOTICE</p>
                    <p class="text-base mt-1 notice-content-text text-gray-700 dark:text-gray-300">
                        All mock tests are <b>password protected</b> for quality assurance. For access credentials, please contact us on WhatsApp: 
                        <a href="https://wa.me/923480358640" target="_blank" class="font-semibold underline" style="color: var(--success-color); hover:text-green-700">
                            +92 348 0358640
                        </a>
                    </p>
                </div>
            </div>
        </div>

        <!-- Section 1: Mock Tests -->
        <section class="mb-16">
            <h2 class="section-title text-3xl sm:text-4xl text-center mb-10 animate-fade-in" data-delay="300">
                Select a Mock Test
            </h2>

            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 mock-test-grid lg:grid-cols-5 gap-6">
                
                <!-- Sample Paper Card YAHAN SE HATA DIYA GAYA HAI -->

                <!-- Generate 10 Mock Test Cards (Dynamically inserted via JS) -->
                <script>
                    const mockTests = [];
                    for (let i = 1; i <= 10; i++) {
                        mockTests.push({
                            title: `Mock Test ${i}`,
                            link: `mock-test${i}.html`,
                            isEnabled: i === 1 // Only Mock Test 1 is enabled
                        });
                    }

                    const mockTestsContainer = document.currentScript.parentNode;
                    
                    mockTests.forEach((test, index) => {
                        const isEnabled = test.isEnabled;
                        
                        // Set link to actual URL or '#' if disabled
                        const linkHref = isEnabled ? test.link : "#";

                        // Add 'disabled-card' class if not enabled
                        const cardClasses = `card-pro animate-fade-in ${isEnabled ? '' : 'disabled-card'}`;

                        // Set button text based on status
                        const buttonText = isEnabled ? 'Start Now' : 'Coming Soon';
                        
                        // Set button color class
                        const buttonClasses = `w-full inline-block ${isEnabled ? 'bg-secondary-btn' : 'disabled-btn'} text-white font-bold py-3 px-4 rounded-lg shadow-lg uppercase text-sm hover:translate-y-0 transition-transform`;


                        const card = document.createElement('a');
                        card.href = linkHref;
                        card.className = cardClasses;
                        // Calculate staggered delay for better visual flow
                        card.style.animationDelay = `${(index * 0.1) + 0.4}s`; 
                        
                        card.innerHTML = `
                            <div class="mb-4 card-icon-primary">
                                <i class="fas fa-edit"></i>
                            </div>
                            <h3 class="text-xl font-semibold mb-6 card-title-text">${test.title}</h3>
                            <span class="${buttonClasses}">
                                ${buttonText}
                            </span>
                        `;
                        mockTestsContainer.appendChild(card);
                    });
                </script>
            </div>
        </section>

        <!-- Section 2: Past Papers -->
        <section class="mb-12">
            <h2 class="section-title past-paper-title text-3xl sm:text-4xl text-center mb-10 animate-fade-in" data-delay="500">
                Past Papers
            </h2>

            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 past-paper-grid lg:grid-cols-5 gap-6">
                
                <!-- NEW CARD: Official Sample Paper (YAHAN PASTE KIYA GAYA HAI) -->
                <a href="sample-paper.html" class="card-pro past-paper-card animate-fade-in" style="animation-delay: 0.5s;">
                    <span class="badge-new">New</span>
                    <!-- Icon class 'card-icon-secondary' (violet) kar di gayi hai -->
                    <div class="mb-4 card-icon-secondary"> 
                        <i class="fas fa-file-signature"></i> 
                    </div>
                    <h3 class="text-xl font-semibold mb-6 card-title-text">Official Sample Paper</h3>
                    <!-- Button class 'bg-past-paper-btn' (violet) kar di gayi hai -->
                    <span class="w-full inline-block bg-past-paper-btn text-white font-bold py-3 px-4 rounded-lg shadow-lg uppercase text-sm hover:translate-y-0 transition-transform"> 
                        Start Now
                    </span>
                </a>

                <!-- Generate 5 Past Paper Cards (Dynamically inserted via JS) -->
                <script>
                    const pastPapers = [];
                    // All past papers are disabled/coming soon
                    const pastPaperIsEnabled = false; 

                    for (let i = 1; i <= 5; i++) {
                        pastPapers.push({
                            title: `Past Paper ${i}`
                        });
                    }

                    const pastPapersContainer = document.currentScript.parentNode;
                    
                    pastPapers.forEach((paper, index) => {
                        const card = document.createElement('a');
                        // Link is always '#' and card is always disabled
                        card.href = "#"; 
                        card.className = `card-pro past-paper-card animate-fade-in disabled-card`; // Added disabled-card class
                        // Animation delay 0.6s se shuru hoga (sample paper ke baad)
                        card.style.animationDelay = `${(index * 0.1) + 0.6}s`; 
                        
                        // Button classes for disabled state
                        const buttonClasses = `w-full inline-block disabled-btn text-white font-bold py-3 px-4 rounded-lg shadow-md uppercase text-sm transition-colors`;


                        card.innerHTML = `
                            <div class="mb-4 card-icon-secondary">
                                <i class="fas fa-file-alt"></i> <!-- Changed icon to fa-file-alt -->
                            </div>
                            <h3 class="text-xl font-semibold mb-6 card-title-text">${paper.title}</h3>
                            <span class="${buttonClasses}">
                                Coming Soon <!-- Button text updated to Coming Soon -->
                            </span>
                        `;
                        pastPapersContainer.appendChild(card);
                    });
                </script>
            </div>
        </section>

    </main>

    <!-- Footer (Standard/Scrollable) -->
    <!-- MODIFIED: Added 'footer-bg' class to apply gradient -->
    <footer class="footer-bg text-white mt-auto">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center py-8"> 
            
            <p class="text-gray-200 text-sm mb-4"> <!-- Adjusted text color for gradient */ -->
                Â© 2025 IBA STS Mock Test Platform. All rights reserved.
            </p>

            <p class="text-gray-100 text-base font-semibold mb-6"> <!-- Adjusted text color for gradient */ -->
                Connect with us on social media for updates and educational support
            </p>
            
            <div class="flex justify-center space-x-8">
                <a href="https://wa.me/923480358640" target="_blank" class="footer-social-link" title="Contact us on WhatsApp">
                    <i class="fab fa-whatsapp text-4xl"></i>
                    <span class="sr-only">WhatsApp</span>
                </a>
                <a href="#" target="_blank" class="footer-social-link" title="Visit our Facebook Page">
                    <i class="fab fa-facebook text-4xl"></i>
                    <span class="sr-only">Facebook</span>
                </a>
            </div>
        </div>
    </footer>

    <!-- JavaScript for Theme Toggle and Animations -->
    <script>
        // --- Theme Toggle ---
        const body = document.body;
        const themeToggle = document.getElementById('themeToggle');
        const themeIcon = document.getElementById('themeIcon');
        
        const savedTheme = localStorage.getItem('theme') || 'light';
        body.setAttribute('data-theme', savedTheme);
        updateThemeIcon(savedTheme);

        themeToggle.addEventListener('click', () => {
            const currentTheme = body.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            body.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeIcon(newTheme);
        });

        function updateThemeIcon(theme) {
            if (theme === 'dark') {
                themeIcon.classList.remove('fa-moon');
                themeIcon.classList.add('fa-sun');
            } else {
                themeIcon.classList.remove('fa-sun');
                themeIcon.classList.add('fa-moon');
            }
        }

        // --- Typing Animation ---
        const typingText = document.getElementById('typingText');
        const phrases = [
            'Master Your Skills Today!',
            'Practice Makes Perfect!',
            'Your Success Journey Starts Here!',
            'Achieve Your Exam Goals!'
        ];
        
        let phraseIndex = 0;
        let charIndex = 0;
        let isDeleting = false;
        let typingSpeed = 100;
        
        function typeWriter() {
            const currentPhrase = phrases[phraseIndex];
            
            if (isDeleting) {
                typingText.textContent = currentPhrase.substring(0, charIndex - 1);
                charIndex--;
                typingSpeed = 50;
            } else {
                typingText.textContent = currentPhrase.substring(0, charIndex + 1);
                charIndex++;
                typingSpeed = 100;
            }
            
            if (!isDeleting && charIndex === currentPhrase.length) {
                setTimeout(() => {
                    isDeleting = true;
                }, 2000);
            } else if (isDeleting && charIndex === 0) {
                isDeleting = false;
                phraseIndex = (phraseIndex + 1) % phrases.length;
            }
            
            setTimeout(typeWriter, typingSpeed);
        }
        
        window.addEventListener('load', () => {
            setTimeout(typeWriter, 1000);
        });

        // --- Intersection Observer for Animations ---
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const delay = parseInt(entry.target.getAttribute('data-delay')) || 0;
                    // Apply delay as property, start animation via class toggle
                    entry.target.style.animationDelay = `${delay / 1000}s`;
                    entry.target.classList.add('active'); 
                    // Stop observing once animation has started for performance
                    observer.unobserve(entry.target);
                }
            });
        }, {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        });

        // Apply observer to all elements with the animation class
        document.querySelectorAll('.animate-fade-in').forEach(el => {
            // Check for staggered delays applied via JS for cards, or use attribute data-delay
            if (!el.style.animationDelay) {
                const delay = parseInt(el.getAttribute('data-delay')) || 0;
                el.style.animationDelay = `${delay / 1000}s`;
            }
            observer.observe(el);
        });

    </script>
</body>
</html>